(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"546f":function(e,t,n){"use strict";n("6426")},6426:function(e,t,n){},"713b":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{attrs:{view:"lHh Lpr lFf"}},[n("q-header",{staticClass:"bg-layoutcolor"},[n("q-toolbar",{staticClass:"text-white"},[n("q-btn",{attrs:{unelevated:"",flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}),n("q-btn",{directives:[{name:"show",rawName:"v-show",value:!0===e.isAllowBack,expression:"isAllowBack === true"}],attrs:{flat:"",dense:"",round:"",icon:"arrow_back_ios","aria-label":"Back"},on:{click:e.goBack}}),n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"refresh","aria-label":"Refresh"},on:{click:e.refresh}}),n("q-space"),n("q-btn",{staticClass:"q-mx-xs",attrs:{unelevated:"",label:e.userInfo.realname,flat:"","no-caps":"","icon-right":"arrow_drop_down"}},[n("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("div",{staticClass:"column bg-layoutcolor text-white profile-menu"},[n("q-item",{staticClass:"row items-center q-px-lg",attrs:{clickable:""},on:{click:e.logout}},[n("q-icon",{attrs:{name:"exit_to_app"}}),n("q-item-label",{staticClass:"q-pl-md menu-label"},[e._v("退出登录")])],1)],1)])],1)],1)],1),n("q-drawer",{attrs:{"show-if-above":"",width:200,breakpoint:600,"content-class":"bg-white"},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"bg-layoutcolor text-white",staticStyle:{height:"50px",border:"1px #25272A solid",cursor:"pointer"},attrs:{clickable:""},on:{click:e.goHome}},[n("div",{staticClass:"text-center logo"},[n("div",{staticClass:"text-center"},[e._v("crudapi")])])]),n("q-tree",{ref:"qTreeProxy",attrs:{"selected-color":"primary",nodes:e.allMenu,selected:e.selected,"node-key":"labelKey","default-expand-all":"","no-connectors":""},on:{"update:selected":[function(t){e.selected=t},function(t){return e.onMenuClickAction()}]}})],1),n("q-page-container",[n("router-view")],1)],1)},a=[],i=n("7ec2"),o=n.n(i),r=n("c973"),l=n.n(r),c=(n("b0c0"),n("a434"),n("8e44")),u={name:"MainLayout",computed:{userInfo:{get:function(){return this.$store.state.user.userInfo}},isAllowBack:{get:function(){return this.$store.state.config.isAllowBack}}},data:function(){return{leftDrawerOpen:!0,selected:null,metadataMenu:{label:"元数据",labelKey:"metadata",icon:"work_outline",children:[{label:"序列号",labelKey:"/metadata/sequences",icon:"format_list_numbered",children:[]},{label:"表",labelKey:"/metadata/tables",icon:"o_table_rows",children:[]},{label:"关系",labelKey:"/metadata/relations",icon:"content_copy",children:[]}]},businessMenu:{label:"业务数据",labelKey:"business",icon:"business",children:[]},systemBusinessMenu:{label:"内置数据",labelKey:"systemBusiness",icon:"tab",children:[]},systemMenu:{label:"系统",labelKey:"system",icon:"o_build",children:[{label:"设置",labelKey:"/setting",icon:"o_settings"},{label:"关于",labelKey:"/about",icon:"o_info"}]},allMenu:[]}},created:function(){this.$root.$on("updateMenuTree",this.updateMenuTreeCb),this.init()},mounted:function(){},activated:function(){},deactivated:function(){},updated:function(){},destroyed:function(){this.$root.$off("updateMenuTree",this.updateMenuTreeCb)},methods:{init:function(){var e=this;return l()(o()().mark((function t(){var n,s,a;return o()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("init"),t.prev=1,t.next=4,c["e"].list(1,9999);case 4:for(n=t.sent,s=0;s<n.length;s++)a=n[s],a.systemable?e.systemBusinessMenu.children.push({label:a.caption,labelKey:e.getBussinessPath(a.name),icon:"insert_chart_outlined"}):e.businessMenu.children.push({label:a.caption,labelKey:e.getBussinessPath(a.name),icon:"insert_chart_outlined"});e.allMenu.push(e.businessMenu),e.allMenu.push(e.systemBusinessMenu),e.allMenu.push(e.metadataMenu),e.allMenu.push(e.systemMenu),e.$refs.qTreeProxy.setExpanded("business",!0),e.$refs.qTreeProxy.setExpanded("systemBusiness",!0),e.$refs.qTreeProxy.setExpanded("metadata",!0),e.$refs.qTreeProxy.setExpanded("system",!0),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,16]])})))()},updateMenu:function(){var e=this;return l()(o()().mark((function t(){var n,s,a;return o()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("updateMenu"),t.prev=1,e.businessMenu.children.splice(0,e.businessMenu.children.length),t.next=5,c["e"].list(1,9999);case 5:for(n=t.sent,s=0;s<n.length;s++)a=n[s],e.businessMenu.children.push({label:a.caption,labelKey:e.getBussinessPath(a.name),icon:"insert_chart_outlined"});t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error(t.t0),e.$q.notify(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},updateMenuTreeCb:function(){this.updateMenu()},getBussinessPath:function(e){return"/business/"+e},getTablePath:function(e){return"/metadata/tables/"+e},getSequencePath:function(e){return"/metadata/sequences/"+e},onMenuClickAction:function(){console.info("onMenuClickAction"),this.selected&&this.selected&&0===this.selected.indexOf("/")&&(this.$router.currentRoute.fullPath!==this.selected?(console.info("onMenuClickAction push"+this.selected),this.$router.push(this.selected)):console.info("onMenuClickAction skip"))},refresh:function(){window.location.reload(!0)},goBack:function(){this.$router.go(-1)},goHome:function(){this.$router.push("/")},logout:function(){var e=this;this.$store.dispatch("user/logout").then(l()(o()().mark((function t(){return o()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/login");case 1:case"end":return t.stop()}}),t)})))).catch((function(e){console.error(e)}))}}},d=u,h=(n("546f"),n("2877")),p=n("4d5a"),f=n("e359"),b=n("65c6"),m=n("9c40"),w=n("2c91"),y=n("4e73"),M=n("66e5"),v=n("0016"),g=n("0170"),k=n("9404"),x=n("7f41"),q=n("09e3"),_=n("714f"),C=n("eebe"),$=n.n(C),B=Object(h["a"])(d,s,a,!1,null,null,null);t["default"]=B.exports;$()(B,"components",{QLayout:p["a"],QHeader:f["a"],QToolbar:b["a"],QBtn:m["a"],QSpace:w["a"],QMenu:y["a"],QItem:M["a"],QIcon:v["a"],QItemLabel:g["a"],QDrawer:k["a"],QTree:x["a"],QPageContainer:q["a"]}),$()(B,"directives",{Ripple:_["a"]})}}]);