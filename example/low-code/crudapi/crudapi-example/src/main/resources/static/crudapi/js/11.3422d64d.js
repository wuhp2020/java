(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"1e40":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"q-pa-md q-gutter-sm bg-page"},[n("q-breadcrumbs",[n("q-breadcrumbs-el",{attrs:{label:"表管理"}}),n("q-breadcrumbs-el",{attrs:{label:"联合索引"}}),n("q-breadcrumbs-el",{attrs:{label:e.table.caption}})],1),n("q-separator"),n("div",{staticClass:"bg-table-list"},[e.table.id?n("CIndexList",{ref:"cIndexListRef",model:{value:e.table,callback:function(t){e.table=t},expression:"table"}}):e._e(),n("q-separator"),n("div",{staticClass:"q-py-md"},[n("div",{staticClass:"row justify-center"},[n("q-btn",{attrs:{unelevated:"",color:"primary",label:"保存"},on:{click:e.onSubmitClick}})],1)])],1)],1)},i=[],r=n("7ec2"),o=n.n(r),c=n("c973"),s=n.n(c),l=(n("d3b7"),n("159b"),n("8e44")),u=n("ed08"),d=n("11ec"),f={data:function(){return{loading:!0,table:{}}},created:function(){var e=this;return s()(o()().mark((function t(){return o()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("indexList->created"),t.next=3,e.init();case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){console.info("indexList->mounted")},activated:function(){console.info("indexList->activated")},deactivated:function(){console.info("indexList->deactivated")},updated:function(){console.info("indexList->updated")},destroyed:function(){console.info("indexList->destroyed")},filters:{dateTimeFormat:function(e){return u["a"].dateTimeFormat(e)}},methods:{init:function(e){var t=this;return s()(o()().mark((function n(){return o()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.info("indexList->init"),t.$store.commit("config/updateIsAllowBack",t.$route.meta.isAllowBack),n.next=4,t.loadData(e);case 4:case"end":return n.stop()}}),n)})))()},loadData:function(e){var t=this;return s()(o()().mark((function n(){var a;return o()().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,console.info("indexList->loadData"),t.loading=!0,t.table={},n.next=6,l["e"].get(e||t.$route.params.id);case 6:a=n.sent,t.table=a,t.loading=!1,console.info("indexList->loadData done"),n.next=17;break;case 12:n.prev=12,n.t0=n["catch"](0),console.error(n.t0),t.loading=!1,t.$q.notify(n.t0);case 17:case"end":return n.stop()}}),n,null,[[0,12]])})))()},onSubmitClick:function(){var e=this;return s()(o()().mark((function t(){return o()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.$q.dialog({title:"提交",message:"确认提交吗？",ok:{unelevated:!0},cancel:{color:"negative",unelevated:!0},persistent:!1}).onOk(s()(o()().mark((function t(){return o()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.onSubmit();case 2:case"end":return t.stop()}}),t)})))).onCancel((function(){})).onDismiss((function(){console.info("I am triggered on both OK and Cancel")}))}catch(n){e.$q.notify("修改失败")}case 1:case"end":return t.stop()}}),t)})))()},onSubmit:function(){var e=this;return s()(o()().mark((function t(){var n,a,i;return o()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show({message:"提交中"}),t.prev=1,n=e.$refs["cIndexListRef"],a=n.getData(),i=Object(d["a"])(!0,{},a),i.indexs.forEach((function(e){e.isNewRow&&(delete e.id,delete e.isNewRow)})),t.next=8,l["e"].update(e.$route.params.id,i);case 8:e.$q.notify("修改成功"),e.$q.loading.hide(),e.loadData(),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](1),console.error(t.t0),e.$q.loading.hide();case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))()}}},p=f,b=(n("c595"),n("2877")),m=n("ead5"),v=n("079e"),w=n("eb85"),h=n("9c40"),x=n("eebe"),g=n.n(x),k=Object(b["a"])(p,a,i,!1,null,null,null);t["default"]=k.exports;g()(k,"components",{QBreadcrumbs:m["a"],QBreadcrumbsEl:v["a"],QSeparator:w["a"],QBtn:h["a"]})},"526c":function(e,t,n){},c595:function(e,t,n){"use strict";n("526c")}}]);