(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"005a":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"q-pa-md"},[n("div",{attrs:{id:"container"}})])}],i=n("7ec2"),r=n.n(i),l=n("c973"),d=n.n(l),c=(n("7db0"),n("d3b7"),n("b0c0"),n("8e44")),s=n("ed08"),u=n("30d1"),f=n.n(u),p={data:function(){return{relations:[]}},created:function(){console.info("created")},mounted:function(){this.init(),console.info("mounted")},activated:function(){console.info("activated")},deactivated:function(){console.info("deactivated")},updated:function(){console.info("updated")},destroyed:function(){console.info("destroyed")},beforeRouteUpdate:function(e,t,n){console.info("beforeRouteUpdate"),n()},filters:{dateTimeFormat:function(e){return s["a"].dateTimeFormat(e)}},methods:{addNode:function(e,t){var n=e.find((function(e){return e.id===t.id}));n||e.push(t)},init:function(e){var t=this;return d()(r()().mark((function e(){var n,o,a,i,l,d,s,u,p,m;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.info("init"),t.$store.commit("config/updateIsAllowBack",t.$route.meta.isAllowBack),e.prev=2,e.next=5,c["c"].list();case 5:for(n=e.sent,t.relations=n,o=[],a=[],i=0;i<t.relations.length;i++)l=t.relations[i],d={id:l.fromTable.id+"",label:l.fromTable.caption,description:l.fromTable.name},t.addNode(o,d),s={id:l.toTable.id+"",label:l.toTable.caption,description:l.toTable.name},t.addNode(o,s),a.push({source:d.id,target:s.id,sourceLabel:d.label+", "+l.fromColumn.caption+"("+l.fromColumn.name+")",targetLabel:s.label+", "+l.toColumn.caption+"("+l.toColumn.name+")",type:"line",label:l.relationType});u={nodes:o,edges:a},p=new f.a.Grid,new f.a.Minimap({size:[100,100],className:"minimap",type:"delegate"}),m=new f.a.Graph({layout:{type:"dagre",preventOverlap:!0,nodeSize:200},fitView:!0,fitViewPadding:[20,40,50,20],plugins:[p],modes:{default:[{type:"tooltip",formatText:function(e){var t="表ID: "+e.id;return t}},{type:"edge-tooltip",formatText:function(e){var t="源: "+e.sourceLabel+"<br/> 目标: "+e.targetLabel+"<br/> 类型: "+e.label;return t}}]},container:"container",width:1024,height:900,defaultNode:{type:"modelRect",size:[250,100],style:{lineWidth:2},labelCfg:{style:{fontSize:20}}},defaultEdge:{style:{stroke:"black",lineWidth:3},labelCfg:{}}}),m.data(u),m.render(),e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](2),console.error(e.t0),t.$q.notify(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})))()}}},m=p,b=(n("d1fc"),n("2877")),v=Object(b["a"])(m,o,a,!1,null,null,null);t["default"]=v.exports},"801b":function(e,t,n){},d1fc:function(e,t,n){"use strict";n("801b")}}]);