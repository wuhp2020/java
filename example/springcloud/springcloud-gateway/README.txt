网关应当具备以下功能:
性能: API高可用, 负载均衡, 容错机制.
安全: 权限身份认证、脱敏，流量清洗, 后端签名（保证全链路可信调用）, 黑名单（非法调用的限制）.
日志: 日志记录（spainid,traceid）一旦涉及分布式, 全链路跟踪必不可少.
缓存: 数据缓存.
监控: 记录请求响应数据, api耗时分析, 性能监控.
限流: 流量控制, 错峰流控, 可以定义多种限流规则.
灰度: 线上灰度部署, 可以减小风险.
路由: 动态路由规则.

#####################################

网关处理流程:
1. 请求发送到网关, DispatcherHandler 是HTTP请求的中央分发器, 将请求匹配到响应的HandlerMapping.
2. 请求与处理器之间有一个映射关系, 网关将会对请求进行路由, handler会匹配到RoutePredicateHandlerMapping, 以匹配到对应的Route.
3. 接着请求到达网关的web处理器, 该WebHandler 代理了一系列网关过滤器和全局过滤器的实例, 此时会对请求头或响应头进行处理.
4. 最后转发到具体的代理服务.